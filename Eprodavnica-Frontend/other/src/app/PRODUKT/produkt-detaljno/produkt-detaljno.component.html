<br>
<h2>&nbsp;&nbsp;&nbsp;&nbsp;{{produkt.naziv}}</h2>
<mat-chip-listbox aria-label="Fish selection">
    <mat-chip *ngFor="let tip of produkt.listaTipova" color="accent">{{tip.naziv}}</mat-chip>
</mat-chip-listbox>
 
<table style="text-align: center;width: 100%;">
    <tr>
        <td>
            <img src="https://upload.wikimedia.org/wikipedia/commons/2/25/Icon-round-Question_mark.jpg" alt="Girl in a jacket" width="600" height="400">
        </td>
        <td>
            <form>
                Količina <br>
                <mat-form-field appearance="fill"  [style.height.px]=65>
                    <input matInput class="form-control" [formControl] = "kolicinaFormControl" required>
                    <mat-error *ngIf="kolicinaFormControl.invalid">{{getErrorMessage(kolicinaFormControl)}}</mat-error>
                  </mat-form-field> 
                  <br> <br>
                <button type="button" mat-raised-button color="accent" *ngIf="getRole()==='ROLE_MUSTERIJA'"  
                [mtBasicSpinner]="status" [hideText]="status" (click)="dodajUKorpu()"
                [disabled]="kolicinaFormControl.invalid">Dodaj u korpu</button> 
                
            </form>

            <br> <br>
            <button type="button" mat-raised-button *ngIf="getRole()==='ROLE_MUSTERIJA' && !daLiJeUWishlist"
            [mtBasicSpinner]="status2" [hideText]="status2" 
            (click)="dodajUWishlist()" >Dodaj u Wishlist</button> 

            <button type="button" mat-raised-button *ngIf="getRole()==='ROLE_MUSTERIJA' && daLiJeUWishlist"
            [mtBasicSpinner]="status2" [hideText]="status2" color="warn"
            (click)="dodajUWishlist()">U wishlist-u vam je</button>

            <br> <br>

            <button type="button" mat-raised-button color="accent" *ngIf="getRole()==='ROLE_ADMIN' || getRole()==='ROLE_PRODAVAC'" (click)="edit()">Edit</button> <br><br>
            <button type="button" mat-raised-button color="warn" *ngIf="getRole()==='ROLE_ADMIN' || getRole()==='ROLE_PRODAVAC'">Delete</button>
        </td>
    </tr>
</table>
<br>
<mat-tab-group dynamicHeight>
    <mat-tab label="Deskripcija">
        <div style="text-align: center;">
            <p *ngIf="produkt.ocena>0">Ocena : &nbsp; {{produkt.ocena}}</p>
            <p *ngIf="produkt.ocena==-1">Ovaj produkt nema recenzije</p>
            <p>Cena : &nbsp; {{produkt.cena}}</p>
            <h3>Deskripcija</h3>
            <p>
                {{produkt.deskripcija}}
            </p>
        </div>
    </mat-tab>
    <mat-tab label="Recenzije">

            <p style="font-size: 25px;text-align: center;">Pretraga</p>
            <div style="text-align: center;">
                <button type="button" mat-raised-button color="primary" (click)="open(OcenaProzor)" [mtBasicSpinner]="status3" [hideText]="status3" >Filter</button>&nbsp;&nbsp;
        
                <button type="button" mat-raised-button color="warn" (click)="resetuj()">Resetuj</button>
            </div>
            <div>
            <app-recenzija-table [listaRecenzija]="lista"></app-recenzija-table>
            </div>
            <br>
            <div style="text-align: center;">
            <app-pagination [totalItems]="totalSize" [pageSize]="pageSize" (pageSelected)="changePage($event)">
                
            </app-pagination>
        </div>
    </mat-tab>
</mat-tab-group>

<ng-template #OcenaProzor let-modal>
    <div class="modal-header">
        <h4 class="modal-title" 
            id="modal-basic-title">
            Filtriraj Po Ocenama
        </h4>
        <button type="button" class="close"
                aria-label="Close" (click)=
                "modal.dismiss('Cross click')">
  
            <span aria-hidden="true">
                ×
            </span>
        </button>
    </div>
    <form [formGroup]="ocenaForm">
        <div class="modal-body">
                <div class="form-group">
                    <div class="input-group" formArrayName="ocene">
                        <div *ngFor="let ocena of ocene.controls; let i=index">
                          <div  [formGroupName]="i">
                            <mat-checkbox formControlName="ocena" color="accent">{{listaOcena[i]}}</mat-checkbox>
                          </div>
                        </div>
                    </div>
                </div>
        </div>
        <div [ngClass]="['modal-footer','form-group']">
            <button  mat-raised-button type="submit"
                  color="accent" 
                  (click)="modal.close('Save click');filters();">
                  Filtriraj
              </button>
        </div>
    </form>
  </ng-template>